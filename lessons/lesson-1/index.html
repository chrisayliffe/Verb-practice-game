<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Icelandic Verb Practice Game – Nútíð Only</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      width: 100%;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
      font-family: 'Outfit', sans-serif;
      background: #ffffff;
      color: #121212;
      line-height: 1.6;
      font-size: 16px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 16px;
      box-sizing: border-box;
      max-height: 100vh;
      overflow: visible;
    }

    h1 { font-size: 2rem; font-weight: 700; margin-bottom: 8px; color: #121212; }
    .subtitle { font-size: 1rem; color: #666; margin-bottom: 16px; }

    .controls {
      background: #f9f9f9;
      padding: 14px;
      border-radius: 10px;
      margin-bottom: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .control-row {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
      align-items: center;
    }

    label { font-size: 1rem; font-weight: 600; color: #121212; }

    select, button {
      font-family: 'Outfit', sans-serif;
      font-size: 1.0625rem;
      padding: 12px 20px;
      border-radius: 8px;
      border: 1px solid #ddd;
      background: white;
      color: #121212;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    select:hover, select:focus {
      border-color: #21b766;
      outline: none;
    }

    button {
      font-weight: 600;
      border: none;
      background: #21b766;
      color: white;
      font-size: 1.0625rem;
    }

    button:hover {
      background: #1a9654;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(33, 183, 102, 0.3);
    }

    button:active { transform: translateY(0); }
    button.secondary { background: #121212; }
    button.secondary:hover { background: #333; }

    .mode-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 14px;
    }

    .mode-tab {
      flex: 1;
      padding: 14px;
      background: #f0f0f0;
      border: 2px solid transparent;
      color: #666;
      font-weight: 600;
      font-size: 1.0625rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .mode-tab.active {
      background: white;
      border-color: #21b766;
      color: #21b766;
      box-shadow: 0 2px 8px rgba(33, 183, 102, 0.1);
    }

    .game-area {
      background: white;
      padding: 18px;
      border-radius: 10px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      margin-bottom: 8px;
    }

    table {
      table-layout: fixed;
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 12px;
    }

    th, td {
      padding: 10px 8px;
      text-align: center;
      border: 1px solid #e0e0e0;
      font-size: 0.9375rem;
    }

    th { background: #f5f5f5; font-weight: 600; color: #121212; font-size: 1rem; }
    td { background: white; }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-family: 'Outfit', sans-serif;
      font-size: 1.0625rem;
      transition: all 0.2s ease;
    }

    input[type="text"]:focus { outline: none; border-color: #21b766; }
    input.correct { border-color: #21b766; background: #f0fdf4; }
    input.incorrect { border-color: #f15d4e; background: #fef2f2; }

    .drag-tiles {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
      min-height: 70px;
      max-height: 140px;
      overflow-y: auto;
      padding: 10px;
      background: #f9f9f9;
      border-radius: 8px;
      border: 2px dashed #ddd;
    }

    .tile {
      padding: 8px 14px;
      background: white;
      border: 2px solid #21b766;
      border-radius: 6px;
      cursor: grab;
      user-select: none;
      font-weight: 500;
      font-size: 0.9375rem;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .tile:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .tile.dragging { opacity: 0.5; cursor: grabbing; }

    .drop-zone {
      min-height: 40px;
      background: #f9f9f9;
      border: 2px dashed #ddd;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .drop-zone.drag-over { background: #e8f5e9; border-color: #21b766; }
    .drop-zone.correct { background: #f0fdf4; border-color: #21b766; }
    .drop-zone.incorrect { background: #fef2f2; border-color: #f15d4e; }

    .score {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      background: #f9f9f9;
      border-radius: 8px;
      margin-bottom: 12px;
    }

    .score-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      font-size: 1.0625rem;
    }

    .score-value { font-size: 1.625rem; color: #21b766; }
    .actions { display: flex; gap: 10px; flex-wrap: wrap; }
    .actions button { flex: 1; min-width: 150px; }
    .hidden { display: none !important; }

    .feedback {
      padding: 14px;
      border-radius: 8px;
      margin-top: 16px;
      font-weight: 600;
      font-size: 1.0625rem;
      text-align: center;
    }

    .feedback.success { background: #f0fdf4; color: #21b766; border: 2px solid #21b766; }
    .feedback.error { background: #fef2f2; color: #f15d4e; border: 2px solid #f15d4e; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Icelandic Verb Practice Game</h1>
    <p class="subtitle">Practice verb conjugations (Nútíð only)</p>

    <div class="controls">
      <div class="control-row">
        <div class="control-group">
          <label for="verbSelect">Select Verb:</label>
          <select id="verbSelect">
            <option value="0">að drekka</option>
            <option value="1">að borða</option>
          </select>
        </div>
        <div class="control-group">
          <label>&nbsp;</label>
          <button onclick="toggleAnswers()">Show Answers</button>
        </div>
      </div>
    </div>

    <div class="mode-tabs">
      <div class="mode-tab active" onclick="switchMode('fill', event)">Fill in the Blank</div>
      <div class="mode-tab" onclick="switchMode('drag', event)">Drag & Drop</div>
    </div>

    <div class="score">
      <div class="score-item"><span>Progress:</span><span class="score-value" id="scoreDisplay">0%</span></div>
      <div class="score-item"><span>Correct:</span><span class="score-value" id="correctCount">0</span></div>
    </div>

    <div class="game-area exercise-panels">
      <div id="fillMode">
        <table id="fillTable"></table>
        <div class="actions">
          <button onclick="checkAnswers()">Check Answers</button>
          <button class="secondary" onclick="resetGame()">Reset</button>
        </div>
      </div>

      <div id="dragMode" class="hidden">
        <div class="drag-tiles" id="dragTiles"></div>
        <table id="dragTable"></table>
        <div class="actions">
          <button onclick="checkDragAnswers()">Check Answers</button>
          <button class="secondary" onclick="resetGame()">Reset</button>
        </div>
      </div>

      <div id="feedback"></div>
    </div>
  </div>

  <script>
    const VERB_DATA = [
      {
        "verb": "drekka",
        "tenses": {
          "present": {
            "singular": { "1": "drekk", "2": "drekkur", "3": "drekkur" },
            "plural": { "1": "drekkum", "2": "drekkið", "3": "drekka" }
          }
        },
        "ui": {
          "pronouns": {
            "singular": { "1": "ég", "2": "þú", "3": "hann / hún / það" },
            "plural": { "1": "við", "2": "þið", "3": "þeir / þær / þau" }
          }
        }
      },
      {
        "verb": "borða",
        "tenses": {
          "present": {
            "singular": { "1": "borða", "2": "borðar", "3": "borðar" },
            "plural": { "1": "borðum", "2": "borðið", "3": "borða" }
          }
        },
        "ui": {
          "pronouns": {
            "singular": { "1": "ég", "2": "þú", "3": "hann / hún / það" },
            "plural": { "1": "við", "2": "þið", "3": "þeir / þær / þau" }
          }
        }
      }
    ];

    let currentMode = 'fill', showingAnswers = false, draggedElement = null;

    function init() {
      document.getElementById('verbSelect').addEventListener('change', resetGame);
      resetGame();
    }

    function getCurrentData() {
      const verbIndex = parseInt(document.getElementById('verbSelect').value);
      const verb = VERB_DATA[verbIndex];
      return { tenseData: verb.tenses.present, pronouns: verb.ui.pronouns };
    }

    function switchMode(mode, e) {
      currentMode = mode;
      document.querySelectorAll('.mode-tab').forEach(tab => tab.classList.remove('active'));
      e.target.classList.add('active');
      document.getElementById('fillMode').classList.toggle('hidden', mode !== 'fill');
      document.getElementById('dragMode').classList.toggle('hidden', mode !== 'drag');
      resetGame();
    }

    function createFillTable() {
      const { tenseData, pronouns } = getCurrentData();
      const table = document.getElementById('fillTable');
      table.innerHTML = '';
      const header = ['', '1st Person', '2nd Person', '3rd Person'];
      const tr = document.createElement('tr');
      header.forEach(h => { const th = document.createElement('th'); th.textContent = h; tr.appendChild(th); });
      table.appendChild(tr);

      ['singular', 'plural'].forEach(num => {
        const row = document.createElement('tr');
        const th = document.createElement('th');
        th.textContent = num === 'singular' ? 'Singular (Eintala)' : 'Plural (Fleirtala)';
        row.appendChild(th);
        ['1','2','3'].forEach(p => {
          const td = document.createElement('td');
          const span = document.createElement('div');
          span.style.marginBottom = '6px'; span.style.color = '#666';
          span.textContent = pronouns[num][p];
          const input = document.createElement('input');
          input.type = 'text'; input.dataset.correct = tenseData[num][p];
          td.appendChild(span); td.appendChild(input); row.appendChild(td);
        });
        table.appendChild(row);
      });
    }

    function createDragTable() {
      const { tenseData, pronouns } = getCurrentData();
      const table = document.getElementById('dragTable');
      const tiles = document.getElementById('dragTiles');
      table.innerHTML = ''; tiles.innerHTML = '';

      const forms = [...Object.values(tenseData.singular), ...Object.values(tenseData.plural)].sort(() => Math.random() - 0.5);
      forms.forEach(f => {
        const tile = document.createElement('div');
        tile.className = 'tile'; tile.textContent = f; tile.draggable = true;
        tile.dataset.form = f;
        tile.addEventListener('dragstart', e => draggedElement = e.target);
        tile.addEventListener('dragend', e => e.target.classList.remove('dragging'));
        tiles.appendChild(tile);
      });

      const header = ['', '1st Person', '2nd Person', '3rd Person'];
      const tr = document.createElement('tr');
      header.forEach(h => { const th = document.createElement('th'); th.textContent = h; tr.appendChild(th); });
      table.appendChild(tr);

      ['singular', 'plural'].forEach(num => {
        const row = document.createElement('tr');
        const th = document.createElement('th');
        th.textContent = num === 'singular' ? 'Singular (Eintala)' : 'Plural (Fleirtala)';
        row.appendChild(th);
        ['1','2','3'].forEach(p => {
          const td = document.createElement('td');
          const span = document.createElement('div');
          span.style.marginBottom = '6px'; span.style.color = '#666';
          span.textContent = pronouns[num][p];
          const dz = document.createElement('div');
          dz.className = 'drop-zone'; dz.dataset.correct = tenseData[num][p];
          dz.addEventListener('dragover', e => { e.preventDefault(); dz.classList.add('drag-over'); });
          dz.addEventListener('dragleave', () => dz.classList.remove('drag-over'));
          dz.addEventListener('drop', e => { e.preventDefault(); dz.classList.remove('drag-over'); dz.appendChild(draggedElement); });
          td.appendChild(span); td.appendChild(dz); row.appendChild(td);
        });
        table.appendChild(row);
      });
    }

    function checkAnswers() {
      const inputs = document.querySelectorAll('#fillTable input');
      let correct = 0;
      inputs.forEach(i => { if (i.value.trim().toLowerCase() === i.dataset.correct.toLowerCase()) { i.classList.add('correct'); correct++; } else i.classList.add('incorrect'); });
      updateScore(correct, inputs.length);
    }

    function checkDragAnswers() {
      const zones = document.querySelectorAll('#dragTable .drop-zone');
      let correct = 0;
      zones.forEach(z => {
        const t = z.querySelector('.tile');
        if (t && t.dataset.form.toLowerCase() === z.dataset.correct.toLowerCase()) { z.classList.add('correct'); correct++; }
        else z.classList.add('incorrect');
      });
      updateScore(correct, zones.length);
    }

    function updateScore(c, t) {
      document.getElementById('scoreDisplay').textContent = Math.round((c / t) * 100) + '%';
      document.getElementById('correctCount').textContent = c + '/' + t;
    }

    function toggleAnswers() {
      showingAnswers = !showingAnswers;
      const btn = event.target;
      btn.textContent = showingAnswers ? 'Hide Answers' : 'Show Answers';
      if (showingAnswers && currentMode === 'fill') {
        document.querySelectorAll('#fillTable input').forEach(i => i.value = i.dataset.correct);
      } else if (!showingAnswers) resetGame();
    }

    function resetGame() {
      document.getElementById('feedback').innerHTML = '';
      document.get
